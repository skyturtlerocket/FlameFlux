{"ast":null,"code":"var _jsxFileName = \"/Users/timothyha/firecast/frontend/src/components/MapComponent.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useCallback } from 'react';\nimport { getTileUrl, getIconSizeForSeverity, getSeverityBackgroundColor, getSeverityColorHex } from '../utils/helpers';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MapComponent = ({\n  fires,\n  mapLayer,\n  onFireClick\n}) => {\n  _s();\n  const mapRef = useRef(null);\n  const mapInstanceRef = useRef(null);\n  const markersRef = useRef([]);\n  const polygonsRef = useRef([]);\n  const addFirePolygons = useCallback((map, L, fire) => {\n    const {\n      geometry\n    } = fire;\n    try {\n      if (geometry.type === 'Polygon') {\n        const coords = geometry.coordinates[0];\n        if (!coords || coords.length < 3) {\n          console.warn('Invalid polygon coordinates for fire:', fire.name);\n          return;\n        }\n        const leafletCoords = coords.filter(coord => Array.isArray(coord) && coord.length >= 2 && typeof coord[0] === 'number' && typeof coord[1] === 'number' && !isNaN(coord[0]) && !isNaN(coord[1])).map(coord => [coord[1], coord[0]]);\n        if (leafletCoords.length < 3) {\n          console.warn('Not enough valid coordinates for polygon:', fire.name);\n          return;\n        }\n        const polygon = L.polygon(leafletCoords, {\n          color: '#ef4444',\n          weight: 2,\n          opacity: 0.8,\n          fillColor: '#ef4444',\n          fillOpacity: 0.2\n        }).addTo(map);\n        polygonsRef.current.push(polygon);\n      } else if (geometry.type === 'MultiPolygon') {\n        geometry.coordinates.forEach((polygonCoords, index) => {\n          const coords = polygonCoords[0];\n          if (!coords || coords.length < 3) {\n            console.warn(`Invalid polygon coordinates for fire ${fire.name}, polygon ${index}`);\n            return;\n          }\n          const leafletCoords = coords.filter(coord => Array.isArray(coord) && coord.length >= 2 && typeof coord[0] === 'number' && typeof coord[1] === 'number' && !isNaN(coord[0]) && !isNaN(coord[1])).map(coord => [coord[1], coord[0]]);\n          if (leafletCoords.length < 3) {\n            console.warn(`Not enough valid coordinates for polygon ${index} of fire:`, fire.name);\n            return;\n          }\n          const polygon = L.polygon(leafletCoords, {\n            color: '#ef4444',\n            weight: 2,\n            opacity: 0.8,\n            fillColor: '#ef4444',\n            fillOpacity: 0.2\n          }).addTo(map);\n          polygonsRef.current.push(polygon);\n        });\n      }\n    } catch (error) {\n      console.error('Error adding fire polygon for', fire.name, ':', error);\n    }\n  }, []);\n  const addFireMarkers = useCallback((map, L) => {\n    // Clear existing markers and polygons\n    markersRef.current.forEach(marker => map.removeLayer(marker));\n    polygonsRef.current.forEach(polygon => map.removeLayer(polygon));\n    markersRef.current = [];\n    polygonsRef.current = [];\n\n    // Add markers for each fire\n    fires.forEach(fire => {\n      // Add polygon outlines\n      addFirePolygons(map, L, fire);\n\n      // Get icon configuration based on severity\n      const iconConfig = getIconSizeForSeverity(fire.severity);\n      const backgroundColor = getSeverityBackgroundColor(fire.severity);\n\n      // Create fire icon with dynamic sizing and color\n      const fireIcon = L.divIcon({\n        html: `<div style=\"\n          background: ${backgroundColor};\n          width: ${iconConfig.size}px;\n          height: ${iconConfig.size}px;\n          border-radius: 50%;\n          border: 3px solid white;\n          box-shadow: 0 2px 8px rgba(0,0,0,0.4);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-size: ${iconConfig.fontSize};\n          cursor: pointer;\n        \">ðŸ”¥</div>`,\n        className: 'fire-marker',\n        iconSize: [iconConfig.size, iconConfig.size],\n        iconAnchor: [iconConfig.size / 2, iconConfig.size / 2],\n        popupAnchor: [0, -iconConfig.size / 2]\n      });\n\n      // Add marker\n      const marker = L.marker([fire.lat, fire.lng], {\n        icon: fireIcon\n      }).addTo(map).bindPopup(`\n          <div style=\"color: #374151; font-family: system-ui;\">\n            <h3 style=\"font-weight: bold; font-size: 16px; margin: 0 0 8px 0;\">${fire.name}</h3>\n            <p style=\"margin: 2px 0;\">Size: ${fire.size} acres</p>\n            <p style=\"margin: 2px 0;\">Containment: ${fire.containment ? `${fire.containment}%` : 'N/A'}</p>\n            <p style=\"margin: 2px 0; color: ${getSeverityColorHex(fire.severity)}; font-weight: 600;\">\n              Severity: ${fire.severity}\n            </p>\n            <button onclick=\"window.selectFire('${fire.id}')\" style=\"\n              background: #3b82f6;\n              color: white;\n              border: none;\n              padding: 4px 8px;\n              border-radius: 4px;\n              margin-top: 8px;\n              cursor: pointer;\n              font-size: 12px;\n            \">View Prediction</button>\n          </div>\n        `).on('click', () => onFireClick(fire));\n      markersRef.current.push(marker);\n    });\n  }, [fires, onFireClick, addFirePolygons]);\n  useEffect(() => {\n    const loadLeaflet = async () => {\n      try {\n        // Adding CSS\n        if (!document.querySelector('link[href*=\"leaflet\"]')) {\n          const link = document.createElement('link');\n          link.rel = 'stylesheet';\n          link.href = 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.css';\n          document.head.appendChild(link);\n        }\n\n        // Loading Leaflet\n        if (!window.L) {\n          const script = document.createElement('script');\n          script.src = 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.js';\n          script.onload = () => {\n            console.log('Leaflet loaded successfully');\n            initializeMap();\n          };\n          script.onerror = () => {\n            console.error('Failed to load Leaflet');\n          };\n          document.head.appendChild(script);\n        } else {\n          initializeMap();\n        }\n      } catch (error) {\n        console.error('Error loading Leaflet:', error);\n      }\n    };\n    const initializeMap = () => {\n      if (!mapRef.current || mapInstanceRef.current) return;\n      try {\n        const L = window.L;\n\n        // Initialize the map in San Francisco Bay Area\n        const map = L.map(mapRef.current, {\n          center: [37.7749, -122.4194],\n          zoom: 10,\n          zoomControl: false\n        });\n\n        // Add tile layer\n        const tileLayer = L.tileLayer(getTileUrl(mapLayer), {\n          attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n        }).addTo(map);\n        mapInstanceRef.current = map;\n        mapInstanceRef.current.tileLayer = tileLayer;\n\n        // Add markers when fires are loaded\n        if (fires.length > 0) {\n          addFireMarkers(map, L);\n        }\n\n        // Map resizing\n        const resizeObserver = new ResizeObserver(() => {\n          map.invalidateSize();\n        });\n        resizeObserver.observe(mapRef.current);\n        console.log('Map initialized successfully');\n      } catch (error) {\n        console.error('Error initializing map:', error);\n      }\n    };\n    loadLeaflet();\n    return () => {\n      if (mapInstanceRef.current) {\n        mapInstanceRef.current.remove();\n        mapInstanceRef.current = null;\n      }\n    };\n  }, [fires.length, mapLayer, addFireMarkers]);\n\n  // Change tiles when map type changes\n  useEffect(() => {\n    if (mapInstanceRef.current && mapInstanceRef.current.tileLayer) {\n      const L = window.L;\n      mapInstanceRef.current.removeLayer(mapInstanceRef.current.tileLayer);\n      const newTileLayer = L.tileLayer(getTileUrl(mapLayer), {\n        attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n      }).addTo(mapInstanceRef.current);\n      mapInstanceRef.current.tileLayer = newTileLayer;\n    }\n  }, [mapLayer]);\n\n  // Update markers when fires change\n  useEffect(() => {\n    if (mapInstanceRef.current && window.L && fires.length > 0) {\n      addFireMarkers(mapInstanceRef.current, window.L);\n    }\n  }, [fires, addFireMarkers]);\n\n  // Make selectFire global for popup buttons\n  useEffect(() => {\n    window.selectFire = fireId => {\n      const fire = fires.find(f => f.id === fireId);\n      if (fire) {\n        onFireClick(fire);\n      }\n    };\n    return () => {\n      delete window.selectFire;\n    };\n  }, [fires, onFireClick]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: mapRef,\n    className: \"w-full h-full\",\n    style: {\n      minHeight: '500px'\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 260,\n    columnNumber: 5\n  }, this);\n};\n_s(MapComponent, \"/HJwwHHlGYnBGUJfEGJXM8swO7E=\");\n_c = MapComponent;\nexport default MapComponent;\nvar _c;\n$RefreshReg$(_c, \"MapComponent\");","map":{"version":3,"names":["React","useEffect","useRef","useCallback","getTileUrl","getIconSizeForSeverity","getSeverityBackgroundColor","getSeverityColorHex","jsxDEV","_jsxDEV","MapComponent","fires","mapLayer","onFireClick","_s","mapRef","mapInstanceRef","markersRef","polygonsRef","addFirePolygons","map","L","fire","geometry","type","coords","coordinates","length","console","warn","name","leafletCoords","filter","coord","Array","isArray","isNaN","polygon","color","weight","opacity","fillColor","fillOpacity","addTo","current","push","forEach","polygonCoords","index","error","addFireMarkers","marker","removeLayer","iconConfig","severity","backgroundColor","fireIcon","divIcon","html","size","fontSize","className","iconSize","iconAnchor","popupAnchor","lat","lng","icon","bindPopup","containment","id","on","loadLeaflet","document","querySelector","link","createElement","rel","href","head","appendChild","window","script","src","onload","log","initializeMap","onerror","center","zoom","zoomControl","tileLayer","attribution","resizeObserver","ResizeObserver","invalidateSize","observe","remove","newTileLayer","selectFire","fireId","find","f","ref","style","minHeight","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/timothyha/firecast/frontend/src/components/MapComponent.jsx"],"sourcesContent":["import React, { useEffect, useRef, useCallback } from 'react';\nimport { getTileUrl, getIconSizeForSeverity, getSeverityBackgroundColor, getSeverityColorHex } from '../utils/helpers';\n\nconst MapComponent = ({ fires, mapLayer, onFireClick }) => {\n  const mapRef = useRef(null);\n  const mapInstanceRef = useRef(null);\n  const markersRef = useRef([]);\n  const polygonsRef = useRef([]);\n\n  const addFirePolygons = useCallback((map, L, fire) => {\n    const { geometry } = fire;\n    \n    try {\n      if (geometry.type === 'Polygon') {\n        const coords = geometry.coordinates[0];\n        \n        if (!coords || coords.length < 3) {\n          console.warn('Invalid polygon coordinates for fire:', fire.name);\n          return;\n        }\n        \n        const leafletCoords = coords\n          .filter(coord => Array.isArray(coord) && coord.length >= 2 && \n                  typeof coord[0] === 'number' && typeof coord[1] === 'number' &&\n                  !isNaN(coord[0]) && !isNaN(coord[1]))\n          .map(coord => [coord[1], coord[0]]);\n        \n        if (leafletCoords.length < 3) {\n          console.warn('Not enough valid coordinates for polygon:', fire.name);\n          return;\n        }\n        \n        const polygon = L.polygon(leafletCoords, {\n          color: '#ef4444',\n          weight: 2,\n          opacity: 0.8,\n          fillColor: '#ef4444',\n          fillOpacity: 0.2\n        }).addTo(map);\n        \n        polygonsRef.current.push(polygon);\n        \n      } else if (geometry.type === 'MultiPolygon') {\n        geometry.coordinates.forEach((polygonCoords, index) => {\n          const coords = polygonCoords[0];\n\n          if (!coords || coords.length < 3) {\n            console.warn(`Invalid polygon coordinates for fire ${fire.name}, polygon ${index}`);\n            return;\n          }\n\n          const leafletCoords = coords\n            .filter(coord => Array.isArray(coord) && coord.length >= 2 && \n                    typeof coord[0] === 'number' && typeof coord[1] === 'number' && \n                    !isNaN(coord[0]) && !isNaN(coord[1]))\n            .map(coord => [coord[1], coord[0]]);\n          \n          if (leafletCoords.length < 3) {\n            console.warn(`Not enough valid coordinates for polygon ${index} of fire:`, fire.name);\n            return;\n          }\n          \n          const polygon = L.polygon(leafletCoords, {\n            color: '#ef4444',\n            weight: 2,\n            opacity: 0.8,\n            fillColor: '#ef4444',\n            fillOpacity: 0.2\n          }).addTo(map);\n          \n          polygonsRef.current.push(polygon);\n        });\n      }\n    } catch (error) {\n      console.error('Error adding fire polygon for', fire.name, ':', error);\n    }\n  }, []);\n\n  const addFireMarkers = useCallback((map, L) => {\n    // Clear existing markers and polygons\n    markersRef.current.forEach(marker => map.removeLayer(marker));\n    polygonsRef.current.forEach(polygon => map.removeLayer(polygon));\n    markersRef.current = [];\n    polygonsRef.current = [];\n\n    // Add markers for each fire\n    fires.forEach(fire => {\n      // Add polygon outlines\n      addFirePolygons(map, L, fire);\n      \n      // Get icon configuration based on severity\n      const iconConfig = getIconSizeForSeverity(fire.severity);\n      const backgroundColor = getSeverityBackgroundColor(fire.severity);\n      \n      // Create fire icon with dynamic sizing and color\n      const fireIcon = L.divIcon({\n        html: `<div style=\"\n          background: ${backgroundColor};\n          width: ${iconConfig.size}px;\n          height: ${iconConfig.size}px;\n          border-radius: 50%;\n          border: 3px solid white;\n          box-shadow: 0 2px 8px rgba(0,0,0,0.4);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-size: ${iconConfig.fontSize};\n          cursor: pointer;\n        \">ðŸ”¥</div>`,\n        className: 'fire-marker',\n        iconSize: [iconConfig.size, iconConfig.size],\n        iconAnchor: [iconConfig.size / 2, iconConfig.size / 2],\n        popupAnchor: [0, -iconConfig.size / 2]\n      });\n      \n      // Add marker\n      const marker = L.marker([fire.lat, fire.lng], { icon: fireIcon })\n        .addTo(map)\n        .bindPopup(`\n          <div style=\"color: #374151; font-family: system-ui;\">\n            <h3 style=\"font-weight: bold; font-size: 16px; margin: 0 0 8px 0;\">${fire.name}</h3>\n            <p style=\"margin: 2px 0;\">Size: ${fire.size} acres</p>\n            <p style=\"margin: 2px 0;\">Containment: ${fire.containment ? `${fire.containment}%` : 'N/A'}</p>\n            <p style=\"margin: 2px 0; color: ${getSeverityColorHex(fire.severity)}; font-weight: 600;\">\n              Severity: ${fire.severity}\n            </p>\n            <button onclick=\"window.selectFire('${fire.id}')\" style=\"\n              background: #3b82f6;\n              color: white;\n              border: none;\n              padding: 4px 8px;\n              border-radius: 4px;\n              margin-top: 8px;\n              cursor: pointer;\n              font-size: 12px;\n            \">View Prediction</button>\n          </div>\n        `)\n        .on('click', () => onFireClick(fire));\n\n      markersRef.current.push(marker);\n    });\n  }, [fires, onFireClick, addFirePolygons]);\n\n  useEffect(() => {\n    const loadLeaflet = async () => {\n      try {\n        // Adding CSS\n        if (!document.querySelector('link[href*=\"leaflet\"]')) {\n          const link = document.createElement('link');\n          link.rel = 'stylesheet';\n          link.href = 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.css';\n          document.head.appendChild(link);\n        }\n\n        // Loading Leaflet\n        if (!window.L) {\n          const script = document.createElement('script');\n          script.src = 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.js';\n          script.onload = () => {\n            console.log('Leaflet loaded successfully');\n            initializeMap();\n          };\n          script.onerror = () => {\n            console.error('Failed to load Leaflet');\n          };\n          document.head.appendChild(script);\n        } else {\n          initializeMap();\n        }\n      } catch (error) {\n        console.error('Error loading Leaflet:', error);\n      }\n    };\n\n    const initializeMap = () => {\n      if (!mapRef.current || mapInstanceRef.current) return;\n\n      try {\n        const L = window.L;\n        \n        // Initialize the map in San Francisco Bay Area\n        const map = L.map(mapRef.current, {\n          center: [37.7749, -122.4194],\n          zoom: 10,\n          zoomControl: false\n        });\n\n        // Add tile layer\n        const tileLayer = L.tileLayer(getTileUrl(mapLayer), {\n          attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n        }).addTo(map);\n\n        mapInstanceRef.current = map;\n        mapInstanceRef.current.tileLayer = tileLayer;\n\n        // Add markers when fires are loaded\n        if (fires.length > 0) {\n          addFireMarkers(map, L);\n        }\n\n        // Map resizing\n        const resizeObserver = new ResizeObserver(() => {\n          map.invalidateSize();\n        });\n        resizeObserver.observe(mapRef.current);\n\n        console.log('Map initialized successfully');\n      } catch (error) {\n        console.error('Error initializing map:', error);\n      }\n    };\n\n    loadLeaflet();\n\n    return () => {\n      if (mapInstanceRef.current) {\n        mapInstanceRef.current.remove();\n        mapInstanceRef.current = null;\n      }\n    };\n  }, [fires.length, mapLayer, addFireMarkers]);\n\n  // Change tiles when map type changes\n  useEffect(() => {\n    if (mapInstanceRef.current && mapInstanceRef.current.tileLayer) {\n      const L = window.L;\n      mapInstanceRef.current.removeLayer(mapInstanceRef.current.tileLayer);\n      \n      const newTileLayer = L.tileLayer(getTileUrl(mapLayer), {\n        attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n      }).addTo(mapInstanceRef.current);\n\n      mapInstanceRef.current.tileLayer = newTileLayer;\n    }\n  }, [mapLayer]);\n\n  // Update markers when fires change\n  useEffect(() => {\n    if (mapInstanceRef.current && window.L && fires.length > 0) {\n      addFireMarkers(mapInstanceRef.current, window.L);\n    }\n  }, [fires, addFireMarkers]);\n\n  // Make selectFire global for popup buttons\n  useEffect(() => {\n    window.selectFire = (fireId) => {\n      const fire = fires.find(f => f.id === fireId);\n      if (fire) {\n        onFireClick(fire);\n      }\n    };\n    \n    return () => {\n      delete window.selectFire;\n    };\n  }, [fires, onFireClick]);\n\n  return (\n    <div \n      ref={mapRef} \n      className=\"w-full h-full\"\n      style={{ minHeight: '500px' }}\n    />\n  );\n};\n\nexport default MapComponent;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}