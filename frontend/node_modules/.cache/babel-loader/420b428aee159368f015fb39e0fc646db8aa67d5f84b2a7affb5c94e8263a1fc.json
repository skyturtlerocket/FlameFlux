{"ast":null,"code":"var _jsxFileName = \"/Users/timothyha/firecast/frontend/src/components/MapComponent.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useCallback } from 'react';\nimport { getTileUrl, getIconSizeForSeverity, getSeverityBackgroundColor, getSeverityColorHex } from '../utils/helpers';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MapComponent = ({\n  fires,\n  mapLayer,\n  onFireClick\n}) => {\n  _s();\n  const mapRef = useRef(null);\n  const mapInstanceRef = useRef(null);\n  const markersRef = useRef([]);\n  const polygonsRef = useRef([]);\n  const resizeObserverRef = useRef(null);\n  const addFirePolygons = useCallback((map, L, fire) => {\n    const {\n      geometry\n    } = fire;\n    try {\n      if (geometry.type === 'Polygon') {\n        const coords = geometry.coordinates[0];\n        if (!coords || coords.length < 3) {\n          console.warn('Invalid polygon coordinates for fire:', fire.name);\n          return;\n        }\n        const leafletCoords = coords.filter(coord => Array.isArray(coord) && coord.length >= 2 && typeof coord[0] === 'number' && typeof coord[1] === 'number' && !isNaN(coord[0]) && !isNaN(coord[1])).map(coord => [coord[1], coord[0]]);\n        if (leafletCoords.length < 3) {\n          console.warn('Not enough valid coordinates for polygon:', fire.name);\n          return;\n        }\n        const polygon = L.polygon(leafletCoords, {\n          color: '#ef4444',\n          weight: 2,\n          opacity: 0.8,\n          fillColor: '#ef4444',\n          fillOpacity: 0.2\n        }).addTo(map);\n        polygonsRef.current.push(polygon);\n      } else if (geometry.type === 'MultiPolygon') {\n        geometry.coordinates.forEach((polygonCoords, index) => {\n          const coords = polygonCoords[0];\n          if (!coords || coords.length < 3) {\n            console.warn(`Invalid polygon coordinates for fire ${fire.name}, polygon ${index}`);\n            return;\n          }\n          const leafletCoords = coords.filter(coord => Array.isArray(coord) && coord.length >= 2 && typeof coord[0] === 'number' && typeof coord[1] === 'number' && !isNaN(coord[0]) && !isNaN(coord[1])).map(coord => [coord[1], coord[0]]);\n          if (leafletCoords.length < 3) {\n            console.warn(`Not enough valid coordinates for polygon ${index} of fire:`, fire.name);\n            return;\n          }\n          const polygon = L.polygon(leafletCoords, {\n            color: '#ef4444',\n            weight: 2,\n            opacity: 0.8,\n            fillColor: '#ef4444',\n            fillOpacity: 0.2\n          }).addTo(map);\n          polygonsRef.current.push(polygon);\n        });\n      }\n    } catch (error) {\n      console.error('Error adding fire polygon for', fire.name, ':', error);\n    }\n  }, []);\n  const addFireMarkers = useCallback((map, L) => {\n    // Clear existing markers and polygons\n    markersRef.current.forEach(marker => map.removeLayer(marker));\n    polygonsRef.current.forEach(polygon => map.removeLayer(polygon));\n    markersRef.current = [];\n    polygonsRef.current = [];\n\n    // Add markers for each fire\n    fires.forEach(fire => {\n      // Add polygon outlines\n      addFirePolygons(map, L, fire);\n\n      // Get icon configuration based on severity\n      const iconConfig = getIconSizeForSeverity(fire.severity);\n      const backgroundColor = getSeverityBackgroundColor(fire.severity);\n\n      // Create fire icon with dynamic sizing and color\n      const fireIcon = L.divIcon({\n        html: `<div style=\"\n          background: ${backgroundColor};\n          width: ${iconConfig.size}px;\n          height: ${iconConfig.size}px;\n          border-radius: 50%;\n          border: 3px solid white;\n          box-shadow: 0 2px 8px rgba(0,0,0,0.4);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-size: ${iconConfig.fontSize};\n          cursor: pointer;\n        \">ðŸ”¥</div>`,\n        className: 'fire-marker',\n        iconSize: [iconConfig.size, iconConfig.size],\n        iconAnchor: [iconConfig.size / 2, iconConfig.size / 2],\n        popupAnchor: [0, -iconConfig.size / 2]\n      });\n\n      // Add marker\n      const marker = L.marker([fire.lat, fire.lng], {\n        icon: fireIcon\n      }).addTo(map).bindPopup(`\n          <div style=\"color: #374151; font-family: system-ui;\">\n            <h3 style=\"font-weight: bold; font-size: 16px; margin: 0 0 8px 0;\">${fire.name}</h3>\n            <p style=\"margin: 2px 0;\">Size: ${fire.size} acres</p>\n            <p style=\"margin: 2px 0;\">Containment: ${fire.containment ? `${fire.containment}%` : 'N/A'}</p>\n            <p style=\"margin: 2px 0; color: ${getSeverityColorHex(fire.severity)}; font-weight: 600;\">\n              Severity: ${fire.severity}\n            </p>\n            <button onclick=\"window.selectFire('${fire.id}')\" style=\"\n              background: #3b82f6;\n              color: white;\n              border: none;\n              padding: 4px 8px;\n              border-radius: 4px;\n              margin-top: 8px;\n              cursor: pointer;\n              font-size: 12px;\n            \">View Prediction</button>\n          </div>\n        `).on('click', () => onFireClick(fire));\n      markersRef.current.push(marker);\n    });\n  }, [fires, onFireClick, addFirePolygons]);\n\n  // Cleanup function\n  const cleanup = useCallback(() => {\n    // Disconnect resize observer\n    if (resizeObserverRef.current) {\n      resizeObserverRef.current.disconnect();\n      resizeObserverRef.current = null;\n    }\n\n    // Clean up markers and polygons\n    if (mapInstanceRef.current) {\n      markersRef.current.forEach(marker => {\n        try {\n          mapInstanceRef.current.removeLayer(marker);\n        } catch (e) {\n          console.warn('Error removing marker:', e);\n        }\n      });\n      polygonsRef.current.forEach(polygon => {\n        try {\n          mapInstanceRef.current.removeLayer(polygon);\n        } catch (e) {\n          console.warn('Error removing polygon:', e);\n        }\n      });\n    }\n    markersRef.current = [];\n    polygonsRef.current = [];\n\n    // Remove map instance\n    if (mapInstanceRef.current) {\n      try {\n        mapInstanceRef.current.remove();\n      } catch (e) {\n        console.warn('Error removing map:', e);\n      }\n      mapInstanceRef.current = null;\n    }\n\n    // Clean up global selectFire function\n    if (window.selectFire) {\n      delete window.selectFire;\n    }\n  }, []);\n  useEffect(() => {\n    const loadLeaflet = async () => {\n      try {\n        // Adding CSS\n        if (!document.querySelector('link[href*=\"leaflet\"]')) {\n          const link = document.createElement('link');\n          link.rel = 'stylesheet';\n          link.href = 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.css';\n          document.head.appendChild(link);\n        }\n\n        // Loading Leaflet\n        if (!window.L) {\n          const script = document.createElement('script');\n          script.src = 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.js';\n          script.onload = () => {\n            console.log('Leaflet loaded successfully');\n            initializeMap();\n          };\n          script.onerror = () => {\n            console.error('Failed to load Leaflet');\n          };\n          document.head.appendChild(script);\n        } else {\n          initializeMap();\n        }\n      } catch (error) {\n        console.error('Error loading Leaflet:', error);\n      }\n    };\n    const initializeMap = () => {\n      // Clean up existing map first\n      cleanup();\n      if (!mapRef.current) return;\n      try {\n        const L = window.L;\n\n        // Initialize the map in San Francisco Bay Area\n        const map = L.map(mapRef.current, {\n          center: [37.7749, -122.4194],\n          zoom: 10,\n          zoomControl: false\n        });\n\n        // Add tile layer\n        const tileLayer = L.tileLayer(getTileUrl(mapLayer), {\n          attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n        }).addTo(map);\n        mapInstanceRef.current = map;\n        mapInstanceRef.current.tileLayer = tileLayer;\n\n        // Add markers when fires are loaded\n        if (fires.length > 0) {\n          addFireMarkers(map, L);\n        }\n\n        // Map resizing with proper error handling\n        if (mapRef.current) {\n          resizeObserverRef.current = new ResizeObserver(() => {\n            try {\n              if (mapInstanceRef.current && mapRef.current) {\n                // Add a small delay to ensure DOM is ready\n                setTimeout(() => {\n                  if (mapInstanceRef.current && mapRef.current) {\n                    mapInstanceRef.current.invalidateSize();\n                  }\n                }, 50);\n              }\n            } catch (error) {\n              console.warn('Error during map resize:', error);\n            }\n          });\n          resizeObserverRef.current.observe(mapRef.current);\n        }\n        console.log('Map initialized successfully');\n      } catch (error) {\n        console.error('Error initializing map:', error);\n      }\n    };\n    loadLeaflet();\n    return cleanup;\n  }, [fires.length, mapLayer, addFireMarkers, cleanup]);\n\n  // Change tiles when map type changes\n  useEffect(() => {\n    if (mapInstanceRef.current && mapInstanceRef.current.tileLayer) {\n      const L = window.L;\n      try {\n        mapInstanceRef.current.removeLayer(mapInstanceRef.current.tileLayer);\n        const newTileLayer = L.tileLayer(getTileUrl(mapLayer), {\n          attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n        }).addTo(mapInstanceRef.current);\n        mapInstanceRef.current.tileLayer = newTileLayer;\n      } catch (error) {\n        console.error('Error changing tile layer:', error);\n      }\n    }\n  }, [mapLayer]);\n\n  // Update markers when fires change\n  useEffect(() => {\n    if (mapInstanceRef.current && window.L && fires.length > 0) {\n      try {\n        addFireMarkers(mapInstanceRef.current, window.L);\n      } catch (error) {\n        console.error('Error updating fire markers:', error);\n      }\n    }\n  }, [fires, addFireMarkers]);\n\n  // Make selectFire global for popup buttons\n  useEffect(() => {\n    window.selectFire = fireId => {\n      try {\n        const fire = fires.find(f => f.id === fireId);\n        if (fire) {\n          onFireClick(fire);\n        }\n      } catch (error) {\n        console.error('Error in selectFire:', error);\n      }\n    };\n    return () => {\n      if (window.selectFire) {\n        delete window.selectFire;\n      }\n    };\n  }, [fires, onFireClick]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: mapRef,\n    className: \"w-full h-full\",\n    style: {\n      minHeight: '500px'\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 333,\n    columnNumber: 5\n  }, this);\n};\n_s(MapComponent, \"04K/uat5HQ03wWhIUhY1DrQTd1s=\");\n_c = MapComponent;\nexport default MapComponent;\nvar _c;\n$RefreshReg$(_c, \"MapComponent\");","map":{"version":3,"names":["React","useEffect","useRef","useCallback","getTileUrl","getIconSizeForSeverity","getSeverityBackgroundColor","getSeverityColorHex","jsxDEV","_jsxDEV","MapComponent","fires","mapLayer","onFireClick","_s","mapRef","mapInstanceRef","markersRef","polygonsRef","resizeObserverRef","addFirePolygons","map","L","fire","geometry","type","coords","coordinates","length","console","warn","name","leafletCoords","filter","coord","Array","isArray","isNaN","polygon","color","weight","opacity","fillColor","fillOpacity","addTo","current","push","forEach","polygonCoords","index","error","addFireMarkers","marker","removeLayer","iconConfig","severity","backgroundColor","fireIcon","divIcon","html","size","fontSize","className","iconSize","iconAnchor","popupAnchor","lat","lng","icon","bindPopup","containment","id","on","cleanup","disconnect","e","remove","window","selectFire","loadLeaflet","document","querySelector","link","createElement","rel","href","head","appendChild","script","src","onload","log","initializeMap","onerror","center","zoom","zoomControl","tileLayer","attribution","ResizeObserver","setTimeout","invalidateSize","observe","newTileLayer","fireId","find","f","ref","style","minHeight","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/timothyha/firecast/frontend/src/components/MapComponent.jsx"],"sourcesContent":["import React, { useEffect, useRef, useCallback } from 'react';\nimport { getTileUrl, getIconSizeForSeverity, getSeverityBackgroundColor, getSeverityColorHex } from '../utils/helpers';\n\nconst MapComponent = ({ fires, mapLayer, onFireClick }) => {\n  const mapRef = useRef(null);\n  const mapInstanceRef = useRef(null);\n  const markersRef = useRef([]);\n  const polygonsRef = useRef([]);\n  const resizeObserverRef = useRef(null);\n\n  const addFirePolygons = useCallback((map, L, fire) => {\n    const { geometry } = fire;\n    \n    try {\n      if (geometry.type === 'Polygon') {\n        const coords = geometry.coordinates[0];\n        \n        if (!coords || coords.length < 3) {\n          console.warn('Invalid polygon coordinates for fire:', fire.name);\n          return;\n        }\n        \n        const leafletCoords = coords\n          .filter(coord => Array.isArray(coord) && coord.length >= 2 && \n                  typeof coord[0] === 'number' && typeof coord[1] === 'number' &&\n                  !isNaN(coord[0]) && !isNaN(coord[1]))\n          .map(coord => [coord[1], coord[0]]);\n        \n        if (leafletCoords.length < 3) {\n          console.warn('Not enough valid coordinates for polygon:', fire.name);\n          return;\n        }\n        \n        const polygon = L.polygon(leafletCoords, {\n          color: '#ef4444',\n          weight: 2,\n          opacity: 0.8,\n          fillColor: '#ef4444',\n          fillOpacity: 0.2\n        }).addTo(map);\n        \n        polygonsRef.current.push(polygon);\n        \n      } else if (geometry.type === 'MultiPolygon') {\n        geometry.coordinates.forEach((polygonCoords, index) => {\n          const coords = polygonCoords[0];\n\n          if (!coords || coords.length < 3) {\n            console.warn(`Invalid polygon coordinates for fire ${fire.name}, polygon ${index}`);\n            return;\n          }\n\n          const leafletCoords = coords\n            .filter(coord => Array.isArray(coord) && coord.length >= 2 && \n                    typeof coord[0] === 'number' && typeof coord[1] === 'number' && \n                    !isNaN(coord[0]) && !isNaN(coord[1]))\n            .map(coord => [coord[1], coord[0]]);\n          \n          if (leafletCoords.length < 3) {\n            console.warn(`Not enough valid coordinates for polygon ${index} of fire:`, fire.name);\n            return;\n          }\n          \n          const polygon = L.polygon(leafletCoords, {\n            color: '#ef4444',\n            weight: 2,\n            opacity: 0.8,\n            fillColor: '#ef4444',\n            fillOpacity: 0.2\n          }).addTo(map);\n          \n          polygonsRef.current.push(polygon);\n        });\n      }\n    } catch (error) {\n      console.error('Error adding fire polygon for', fire.name, ':', error);\n    }\n  }, []);\n\n  const addFireMarkers = useCallback((map, L) => {\n    // Clear existing markers and polygons\n    markersRef.current.forEach(marker => map.removeLayer(marker));\n    polygonsRef.current.forEach(polygon => map.removeLayer(polygon));\n    markersRef.current = [];\n    polygonsRef.current = [];\n\n    // Add markers for each fire\n    fires.forEach(fire => {\n      // Add polygon outlines\n      addFirePolygons(map, L, fire);\n      \n      // Get icon configuration based on severity\n      const iconConfig = getIconSizeForSeverity(fire.severity);\n      const backgroundColor = getSeverityBackgroundColor(fire.severity);\n      \n      // Create fire icon with dynamic sizing and color\n      const fireIcon = L.divIcon({\n        html: `<div style=\"\n          background: ${backgroundColor};\n          width: ${iconConfig.size}px;\n          height: ${iconConfig.size}px;\n          border-radius: 50%;\n          border: 3px solid white;\n          box-shadow: 0 2px 8px rgba(0,0,0,0.4);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-size: ${iconConfig.fontSize};\n          cursor: pointer;\n        \">ðŸ”¥</div>`,\n        className: 'fire-marker',\n        iconSize: [iconConfig.size, iconConfig.size],\n        iconAnchor: [iconConfig.size / 2, iconConfig.size / 2],\n        popupAnchor: [0, -iconConfig.size / 2]\n      });\n      \n      // Add marker\n      const marker = L.marker([fire.lat, fire.lng], { icon: fireIcon })\n        .addTo(map)\n        .bindPopup(`\n          <div style=\"color: #374151; font-family: system-ui;\">\n            <h3 style=\"font-weight: bold; font-size: 16px; margin: 0 0 8px 0;\">${fire.name}</h3>\n            <p style=\"margin: 2px 0;\">Size: ${fire.size} acres</p>\n            <p style=\"margin: 2px 0;\">Containment: ${fire.containment ? `${fire.containment}%` : 'N/A'}</p>\n            <p style=\"margin: 2px 0; color: ${getSeverityColorHex(fire.severity)}; font-weight: 600;\">\n              Severity: ${fire.severity}\n            </p>\n            <button onclick=\"window.selectFire('${fire.id}')\" style=\"\n              background: #3b82f6;\n              color: white;\n              border: none;\n              padding: 4px 8px;\n              border-radius: 4px;\n              margin-top: 8px;\n              cursor: pointer;\n              font-size: 12px;\n            \">View Prediction</button>\n          </div>\n        `)\n        .on('click', () => onFireClick(fire));\n\n      markersRef.current.push(marker);\n    });\n  }, [fires, onFireClick, addFirePolygons]);\n\n  // Cleanup function\n  const cleanup = useCallback(() => {\n    // Disconnect resize observer\n    if (resizeObserverRef.current) {\n      resizeObserverRef.current.disconnect();\n      resizeObserverRef.current = null;\n    }\n\n    // Clean up markers and polygons\n    if (mapInstanceRef.current) {\n      markersRef.current.forEach(marker => {\n        try {\n          mapInstanceRef.current.removeLayer(marker);\n        } catch (e) {\n          console.warn('Error removing marker:', e);\n        }\n      });\n      \n      polygonsRef.current.forEach(polygon => {\n        try {\n          mapInstanceRef.current.removeLayer(polygon);\n        } catch (e) {\n          console.warn('Error removing polygon:', e);\n        }\n      });\n    }\n\n    markersRef.current = [];\n    polygonsRef.current = [];\n\n    // Remove map instance\n    if (mapInstanceRef.current) {\n      try {\n        mapInstanceRef.current.remove();\n      } catch (e) {\n        console.warn('Error removing map:', e);\n      }\n      mapInstanceRef.current = null;\n    }\n\n    // Clean up global selectFire function\n    if (window.selectFire) {\n      delete window.selectFire;\n    }\n  }, []);\n\n  useEffect(() => {\n    const loadLeaflet = async () => {\n      try {\n        // Adding CSS\n        if (!document.querySelector('link[href*=\"leaflet\"]')) {\n          const link = document.createElement('link');\n          link.rel = 'stylesheet';\n          link.href = 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.css';\n          document.head.appendChild(link);\n        }\n\n        // Loading Leaflet\n        if (!window.L) {\n          const script = document.createElement('script');\n          script.src = 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.js';\n          script.onload = () => {\n            console.log('Leaflet loaded successfully');\n            initializeMap();\n          };\n          script.onerror = () => {\n            console.error('Failed to load Leaflet');\n          };\n          document.head.appendChild(script);\n        } else {\n          initializeMap();\n        }\n      } catch (error) {\n        console.error('Error loading Leaflet:', error);\n      }\n    };\n\n    const initializeMap = () => {\n      // Clean up existing map first\n      cleanup();\n\n      if (!mapRef.current) return;\n\n      try {\n        const L = window.L;\n        \n        // Initialize the map in San Francisco Bay Area\n        const map = L.map(mapRef.current, {\n          center: [37.7749, -122.4194],\n          zoom: 10,\n          zoomControl: false\n        });\n\n        // Add tile layer\n        const tileLayer = L.tileLayer(getTileUrl(mapLayer), {\n          attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n        }).addTo(map);\n\n        mapInstanceRef.current = map;\n        mapInstanceRef.current.tileLayer = tileLayer;\n\n        // Add markers when fires are loaded\n        if (fires.length > 0) {\n          addFireMarkers(map, L);\n        }\n\n        // Map resizing with proper error handling\n        if (mapRef.current) {\n          resizeObserverRef.current = new ResizeObserver(() => {\n            try {\n              if (mapInstanceRef.current && mapRef.current) {\n                // Add a small delay to ensure DOM is ready\n                setTimeout(() => {\n                  if (mapInstanceRef.current && mapRef.current) {\n                    mapInstanceRef.current.invalidateSize();\n                  }\n                }, 50);\n              }\n            } catch (error) {\n              console.warn('Error during map resize:', error);\n            }\n          });\n          \n          resizeObserverRef.current.observe(mapRef.current);\n        }\n\n        console.log('Map initialized successfully');\n      } catch (error) {\n        console.error('Error initializing map:', error);\n      }\n    };\n\n    loadLeaflet();\n\n    return cleanup;\n  }, [fires.length, mapLayer, addFireMarkers, cleanup]);\n\n  // Change tiles when map type changes\n  useEffect(() => {\n    if (mapInstanceRef.current && mapInstanceRef.current.tileLayer) {\n      const L = window.L;\n      try {\n        mapInstanceRef.current.removeLayer(mapInstanceRef.current.tileLayer);\n        \n        const newTileLayer = L.tileLayer(getTileUrl(mapLayer), {\n          attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n        }).addTo(mapInstanceRef.current);\n\n        mapInstanceRef.current.tileLayer = newTileLayer;\n      } catch (error) {\n        console.error('Error changing tile layer:', error);\n      }\n    }\n  }, [mapLayer]);\n\n  // Update markers when fires change\n  useEffect(() => {\n    if (mapInstanceRef.current && window.L && fires.length > 0) {\n      try {\n        addFireMarkers(mapInstanceRef.current, window.L);\n      } catch (error) {\n        console.error('Error updating fire markers:', error);\n      }\n    }\n  }, [fires, addFireMarkers]);\n\n  // Make selectFire global for popup buttons\n  useEffect(() => {\n    window.selectFire = (fireId) => {\n      try {\n        const fire = fires.find(f => f.id === fireId);\n        if (fire) {\n          onFireClick(fire);\n        }\n      } catch (error) {\n        console.error('Error in selectFire:', error);\n      }\n    };\n    \n    return () => {\n      if (window.selectFire) {\n        delete window.selectFire;\n      }\n    };\n  }, [fires, onFireClick]);\n\n  return (\n    <div \n      ref={mapRef} \n      className=\"w-full h-full\"\n      style={{ minHeight: '500px' }}\n    />\n  );\n};\n\nexport default MapComponent;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}