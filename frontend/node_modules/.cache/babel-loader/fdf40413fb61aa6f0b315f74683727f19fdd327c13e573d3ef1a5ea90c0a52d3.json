{"ast":null,"code":"var _jsxFileName = \"/Users/timothyha/firecast/frontend/src/components/MapComponent.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef } from 'react';\nimport { getTileUrl, getIconSizeForSeverity, getSeverityBackgroundColor, getSeverityColorHex } from '../utils/helpers';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MapComponent = ({\n  fires,\n  mapLayer,\n  onFireClick\n}) => {\n  _s();\n  const mapRef = useRef(null);\n  const mapInstanceRef = useRef(null);\n  const markersRef = useRef([]);\n  const polygonsRef = useRef([]);\n  useEffect(() => {\n    const loadLeaflet = async () => {\n      try {\n        // Adding CSS\n        if (!document.querySelector('link[href*=\"leaflet\"]')) {\n          const link = document.createElement('link');\n          link.rel = 'stylesheet';\n          link.href = 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.css';\n          document.head.appendChild(link);\n        }\n\n        // Loading Leaflet\n        if (!window.L) {\n          const script = document.createElement('script');\n          script.src = 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.js';\n          script.onload = () => {\n            console.log('Leaflet loaded successfully');\n            initializeMap();\n          };\n          script.onerror = () => {\n            console.error('Failed to load Leaflet');\n          };\n          document.head.appendChild(script);\n        } else {\n          initializeMap();\n        }\n      } catch (error) {\n        console.error('Error loading Leaflet:', error);\n      }\n    };\n    const initializeMap = () => {\n      if (!mapRef.current || mapInstanceRef.current) return;\n      try {\n        const L = window.L;\n\n        // Initialize the map in San Francisco Bay Area\n        const map = L.map(mapRef.current, {\n          center: [37.7749, -122.4194],\n          zoom: 10,\n          zoomControl: false\n        });\n\n        // Add tile layer\n        const tileLayer = L.tileLayer(getTileUrl(mapLayer), {\n          attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n        }).addTo(map);\n        mapInstanceRef.current = map;\n        mapInstanceRef.current.tileLayer = tileLayer;\n\n        // Add markers when fires are loaded\n        if (fires.length > 0) {\n          addFireMarkers(map, L);\n        }\n\n        // Map resizing\n        const resizeObserver = new ResizeObserver(() => {\n          map.invalidateSize();\n        });\n        resizeObserver.observe(mapRef.current);\n        console.log('Map initialized successfully');\n      } catch (error) {\n        console.error('Error initializing map:', error);\n      }\n    };\n    loadLeaflet();\n    return () => {\n      if (mapInstanceRef.current) {\n        mapInstanceRef.current.remove();\n        mapInstanceRef.current = null;\n      }\n    };\n  }, []);\n\n  // Change tiles when map type changes\n  useEffect(() => {\n    if (mapInstanceRef.current && mapInstanceRef.current.tileLayer) {\n      const L = window.L;\n      mapInstanceRef.current.removeLayer(mapInstanceRef.current.tileLayer);\n      const newTileLayer = L.tileLayer(getTileUrl(mapLayer), {\n        attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n      }).addTo(mapInstanceRef.current);\n      mapInstanceRef.current.tileLayer = newTileLayer;\n    }\n  }, [mapLayer]);\n\n  // Update markers when fires change\n  useEffect(() => {\n    if (mapInstanceRef.current && window.L && fires.length > 0) {\n      addFireMarkers(mapInstanceRef.current, window.L);\n    }\n  }, [fires]);\n  const addFirePolygons = (map, L, fire) => {\n    const {\n      geometry\n    } = fire;\n    try {\n      if (geometry.type === 'Polygon') {\n        const coords = geometry.coordinates[0];\n        if (!coords || coords.length < 3) {\n          console.warn('Invalid polygon coordinates for fire:', fire.name);\n          return;\n        }\n        const leafletCoords = coords.filter(coord => Array.isArray(coord) && coord.length >= 2 && typeof coord[0] === 'number' && typeof coord[1] === 'number' && !isNaN(coord[0]) && !isNaN(coord[1])).map(coord => [coord[1], coord[0]]);\n        if (leafletCoords.length < 3) {\n          console.warn('Not enough valid coordinates for polygon:', fire.name);\n          return;\n        }\n        const polygon = L.polygon(leafletCoords, {\n          color: '#ef4444',\n          weight: 2,\n          opacity: 0.8,\n          fillColor: '#ef4444',\n          fillOpacity: 0.2\n        }).addTo(map);\n        polygonsRef.current.push(polygon);\n      } else if (geometry.type === 'MultiPolygon') {\n        geometry.coordinates.forEach((polygonCoords, index) => {\n          const coords = polygonCoords[0];\n          if (!coords || coords.length < 3) {\n            console.warn(`Invalid polygon coordinates for fire ${fire.name}, polygon ${index}`);\n            return;\n          }\n          const leafletCoords = coords.filter(coord => Array.isArray(coord) && coord.length >= 2 && typeof coord[0] === 'number' && typeof coord[1] === 'number' && !isNaN(coord[0]) && !isNaN(coord[1])).map(coord => [coord[1], coord[0]]);\n          if (leafletCoords.length < 3) {\n            console.warn(`Not enough valid coordinates for polygon ${index} of fire:`, fire.name);\n            return;\n          }\n          const polygon = L.polygon(leafletCoords, {\n            color: '#ef4444',\n            weight: 2,\n            opacity: 0.8,\n            fillColor: '#ef4444',\n            fillOpacity: 0.2\n          }).addTo(map);\n          polygonsRef.current.push(polygon);\n        });\n      }\n    } catch (error) {\n      console.error('Error adding fire polygon for', fire.name, ':', error);\n    }\n  };\n  const addFireMarkers = (map, L) => {\n    // Clear existing markers and polygons\n    markersRef.current.forEach(marker => map.removeLayer(marker));\n    polygonsRef.current.forEach(polygon => map.removeLayer(polygon));\n    markersRef.current = [];\n    polygonsRef.current = [];\n\n    // Add markers for each fire\n    fires.forEach(fire => {\n      // Add polygon outlines\n      addFirePolygons(map, L, fire);\n\n      // Get icon configuration based on severity\n      const iconConfig = getIconSizeForSeverity(fire.severity);\n      const backgroundColor = getSeverityBackgroundColor(fire.severity);\n\n      // Create fire icon with dynamic sizing and color\n      const fireIcon = L.divIcon({\n        html: `<div style=\"\n          background: ${backgroundColor};\n          width: ${iconConfig.size}px;\n          height: ${iconConfig.size}px;\n          border-radius: 50%;\n          border: 3px solid white;\n          box-shadow: 0 2px 8px rgba(0,0,0,0.4);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-size: ${iconConfig.fontSize};\n          cursor: pointer;\n        \">ðŸ”¥</div>`,\n        className: 'fire-marker',\n        iconSize: [iconConfig.size, iconConfig.size],\n        iconAnchor: [iconConfig.size / 2, iconConfig.size / 2],\n        popupAnchor: [0, -iconConfig.size / 2]\n      });\n\n      // Add marker\n      const marker = L.marker([fire.lat, fire.lng], {\n        icon: fireIcon\n      }).addTo(map).bindPopup(`\n          <div style=\"color: #374151; font-family: system-ui;\">\n            <h3 style=\"font-weight: bold; font-size: 16px; margin: 0 0 8px 0;\">${fire.name}</h3>\n            <p style=\"margin: 2px 0;\">Size: ${fire.size} acres</p>\n            <p style=\"margin: 2px 0;\">Containment: ${fire.containment ? `${fire.containment}%` : 'N/A'}</p>\n            <p style=\"margin: 2px 0; color: ${getSeverityColorHex(fire.severity)}; font-weight: 600;\">\n              Severity: ${fire.severity}\n            </p>\n            <button onclick=\"window.selectFire('${fire.id}')\" style=\"\n              background: #3b82f6;\n              color: white;\n              border: none;\n              padding: 4px 8px;\n              border-radius: 4px;\n              margin-top: 8px;\n              cursor: pointer;\n              font-size: 12px;\n            \">View Prediction</button>\n          </div>\n        `).on('click', () => onFireClick(fire));\n      markersRef.current.push(marker);\n    });\n  };\n\n  // Make selectFire global for popup buttons\n  useEffect(() => {\n    window.selectFire = fireId => {\n      const fire = fires.find(f => f.id === fireId);\n      if (fire) {\n        onFireClick(fire);\n      }\n    };\n    return () => {\n      delete window.selectFire;\n    };\n  }, [fires, onFireClick]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: mapRef,\n    className: \"w-full h-full\",\n    style: {\n      minHeight: '500px'\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 260,\n    columnNumber: 5\n  }, this);\n};\n_s(MapComponent, \"HgUo7s4ImHnKZ96UdUuo+b98OeY=\");\n_c = MapComponent;\nexport default MapComponent;\nvar _c;\n$RefreshReg$(_c, \"MapComponent\");","map":{"version":3,"names":["React","useEffect","useRef","getTileUrl","getIconSizeForSeverity","getSeverityBackgroundColor","getSeverityColorHex","jsxDEV","_jsxDEV","MapComponent","fires","mapLayer","onFireClick","_s","mapRef","mapInstanceRef","markersRef","polygonsRef","loadLeaflet","document","querySelector","link","createElement","rel","href","head","appendChild","window","L","script","src","onload","console","log","initializeMap","onerror","error","current","map","center","zoom","zoomControl","tileLayer","attribution","addTo","length","addFireMarkers","resizeObserver","ResizeObserver","invalidateSize","observe","remove","removeLayer","newTileLayer","addFirePolygons","fire","geometry","type","coords","coordinates","warn","name","leafletCoords","filter","coord","Array","isArray","isNaN","polygon","color","weight","opacity","fillColor","fillOpacity","push","forEach","polygonCoords","index","marker","iconConfig","severity","backgroundColor","fireIcon","divIcon","html","size","fontSize","className","iconSize","iconAnchor","popupAnchor","lat","lng","icon","bindPopup","containment","id","on","selectFire","fireId","find","f","ref","style","minHeight","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/timothyha/firecast/frontend/src/components/MapComponent.jsx"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport { getTileUrl, getIconSizeForSeverity, getSeverityBackgroundColor, getSeverityColorHex } from '../utils/helpers';\n\nconst MapComponent = ({ fires, mapLayer, onFireClick }) => {\n  const mapRef = useRef(null);\n  const mapInstanceRef = useRef(null);\n  const markersRef = useRef([]);\n  const polygonsRef = useRef([]);\n\n  useEffect(() => {\n    const loadLeaflet = async () => {\n      try {\n        // Adding CSS\n        if (!document.querySelector('link[href*=\"leaflet\"]')) {\n          const link = document.createElement('link');\n          link.rel = 'stylesheet';\n          link.href = 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.css';\n          document.head.appendChild(link);\n        }\n\n        // Loading Leaflet\n        if (!window.L) {\n          const script = document.createElement('script');\n          script.src = 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.js';\n          script.onload = () => {\n            console.log('Leaflet loaded successfully');\n            initializeMap();\n          };\n          script.onerror = () => {\n            console.error('Failed to load Leaflet');\n          };\n          document.head.appendChild(script);\n        } else {\n          initializeMap();\n        }\n      } catch (error) {\n        console.error('Error loading Leaflet:', error);\n      }\n    };\n\n    const initializeMap = () => {\n      if (!mapRef.current || mapInstanceRef.current) return;\n\n      try {\n        const L = window.L;\n        \n        // Initialize the map in San Francisco Bay Area\n        const map = L.map(mapRef.current, {\n          center: [37.7749, -122.4194],\n          zoom: 10,\n          zoomControl: false\n        });\n\n        // Add tile layer\n        const tileLayer = L.tileLayer(getTileUrl(mapLayer), {\n          attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n        }).addTo(map);\n\n        mapInstanceRef.current = map;\n        mapInstanceRef.current.tileLayer = tileLayer;\n\n        // Add markers when fires are loaded\n        if (fires.length > 0) {\n          addFireMarkers(map, L);\n        }\n\n        // Map resizing\n        const resizeObserver = new ResizeObserver(() => {\n          map.invalidateSize();\n        });\n        resizeObserver.observe(mapRef.current);\n\n        console.log('Map initialized successfully');\n      } catch (error) {\n        console.error('Error initializing map:', error);\n      }\n    };\n\n    loadLeaflet();\n\n    return () => {\n      if (mapInstanceRef.current) {\n        mapInstanceRef.current.remove();\n        mapInstanceRef.current = null;\n      }\n    };\n  }, []);\n\n  // Change tiles when map type changes\n  useEffect(() => {\n    if (mapInstanceRef.current && mapInstanceRef.current.tileLayer) {\n      const L = window.L;\n      mapInstanceRef.current.removeLayer(mapInstanceRef.current.tileLayer);\n      \n      const newTileLayer = L.tileLayer(getTileUrl(mapLayer), {\n        attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n      }).addTo(mapInstanceRef.current);\n\n      mapInstanceRef.current.tileLayer = newTileLayer;\n    }\n  }, [mapLayer]);\n\n  // Update markers when fires change\n  useEffect(() => {\n    if (mapInstanceRef.current && window.L && fires.length > 0) {\n      addFireMarkers(mapInstanceRef.current, window.L);\n    }\n  }, [fires]);\n\n  const addFirePolygons = (map, L, fire) => {\n    const { geometry } = fire;\n    \n    try {\n      if (geometry.type === 'Polygon') {\n        const coords = geometry.coordinates[0];\n        \n        if (!coords || coords.length < 3) {\n          console.warn('Invalid polygon coordinates for fire:', fire.name);\n          return;\n        }\n        \n        const leafletCoords = coords\n          .filter(coord => Array.isArray(coord) && coord.length >= 2 && \n                  typeof coord[0] === 'number' && typeof coord[1] === 'number' &&\n                  !isNaN(coord[0]) && !isNaN(coord[1]))\n          .map(coord => [coord[1], coord[0]]);\n        \n        if (leafletCoords.length < 3) {\n          console.warn('Not enough valid coordinates for polygon:', fire.name);\n          return;\n        }\n        \n        const polygon = L.polygon(leafletCoords, {\n          color: '#ef4444',\n          weight: 2,\n          opacity: 0.8,\n          fillColor: '#ef4444',\n          fillOpacity: 0.2\n        }).addTo(map);\n        \n        polygonsRef.current.push(polygon);\n        \n      } else if (geometry.type === 'MultiPolygon') {\n        geometry.coordinates.forEach((polygonCoords, index) => {\n          const coords = polygonCoords[0];\n\n          if (!coords || coords.length < 3) {\n            console.warn(`Invalid polygon coordinates for fire ${fire.name}, polygon ${index}`);\n            return;\n          }\n\n          const leafletCoords = coords\n            .filter(coord => Array.isArray(coord) && coord.length >= 2 && \n                    typeof coord[0] === 'number' && typeof coord[1] === 'number' && \n                    !isNaN(coord[0]) && !isNaN(coord[1]))\n            .map(coord => [coord[1], coord[0]]);\n          \n          if (leafletCoords.length < 3) {\n            console.warn(`Not enough valid coordinates for polygon ${index} of fire:`, fire.name);\n            return;\n          }\n          \n          const polygon = L.polygon(leafletCoords, {\n            color: '#ef4444',\n            weight: 2,\n            opacity: 0.8,\n            fillColor: '#ef4444',\n            fillOpacity: 0.2\n          }).addTo(map);\n          \n          polygonsRef.current.push(polygon);\n        });\n      }\n    } catch (error) {\n      console.error('Error adding fire polygon for', fire.name, ':', error);\n    }\n  };\n\n  const addFireMarkers = (map, L) => {\n    // Clear existing markers and polygons\n    markersRef.current.forEach(marker => map.removeLayer(marker));\n    polygonsRef.current.forEach(polygon => map.removeLayer(polygon));\n    markersRef.current = [];\n    polygonsRef.current = [];\n\n    // Add markers for each fire\n    fires.forEach(fire => {\n      // Add polygon outlines\n      addFirePolygons(map, L, fire);\n      \n      // Get icon configuration based on severity\n      const iconConfig = getIconSizeForSeverity(fire.severity);\n      const backgroundColor = getSeverityBackgroundColor(fire.severity);\n      \n      // Create fire icon with dynamic sizing and color\n      const fireIcon = L.divIcon({\n        html: `<div style=\"\n          background: ${backgroundColor};\n          width: ${iconConfig.size}px;\n          height: ${iconConfig.size}px;\n          border-radius: 50%;\n          border: 3px solid white;\n          box-shadow: 0 2px 8px rgba(0,0,0,0.4);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-size: ${iconConfig.fontSize};\n          cursor: pointer;\n        \">ðŸ”¥</div>`,\n        className: 'fire-marker',\n        iconSize: [iconConfig.size, iconConfig.size],\n        iconAnchor: [iconConfig.size / 2, iconConfig.size / 2],\n        popupAnchor: [0, -iconConfig.size / 2]\n      });\n      \n      // Add marker\n      const marker = L.marker([fire.lat, fire.lng], { icon: fireIcon })\n        .addTo(map)\n        .bindPopup(`\n          <div style=\"color: #374151; font-family: system-ui;\">\n            <h3 style=\"font-weight: bold; font-size: 16px; margin: 0 0 8px 0;\">${fire.name}</h3>\n            <p style=\"margin: 2px 0;\">Size: ${fire.size} acres</p>\n            <p style=\"margin: 2px 0;\">Containment: ${fire.containment ? `${fire.containment}%` : 'N/A'}</p>\n            <p style=\"margin: 2px 0; color: ${getSeverityColorHex(fire.severity)}; font-weight: 600;\">\n              Severity: ${fire.severity}\n            </p>\n            <button onclick=\"window.selectFire('${fire.id}')\" style=\"\n              background: #3b82f6;\n              color: white;\n              border: none;\n              padding: 4px 8px;\n              border-radius: 4px;\n              margin-top: 8px;\n              cursor: pointer;\n              font-size: 12px;\n            \">View Prediction</button>\n          </div>\n        `)\n        .on('click', () => onFireClick(fire));\n\n      markersRef.current.push(marker);\n    });\n  };\n\n  // Make selectFire global for popup buttons\n  useEffect(() => {\n    window.selectFire = (fireId) => {\n      const fire = fires.find(f => f.id === fireId);\n      if (fire) {\n        onFireClick(fire);\n      }\n    };\n    \n    return () => {\n      delete window.selectFire;\n    };\n  }, [fires, onFireClick]);\n\n  return (\n    <div \n      ref={mapRef} \n      className=\"w-full h-full\"\n      style={{ minHeight: '500px' }}\n    />\n  );\n};\n\nexport default MapComponent;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}